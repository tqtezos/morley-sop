<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Lorentz.UStore.Lift</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Lorentz.UStore.Lift.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lorentz-0.2.0: EDSL for the Michelson Language</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Lorentz.UStore.Lift</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Internals</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Composability helper for <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:liftUStore">liftUStore</a> :: (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, RequireAllUniqueFields template) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> (<a href="../morley-1.1.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> template ': s)</li><li class="src short"><a href="#v:unliftUStore">unliftUStore</a> :: <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> template ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> (<a href="../morley-1.1.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s)</li><li class="src short"><span class="keyword">type</span> <a href="#t:UStoreFieldsAreUnique">UStoreFieldsAreUnique</a> template = <a href="../morley-1.1.0/Util-Type.html#t:AllUnique" title="Util.Type">AllUnique</a> (UStoreFields template)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:liftUStore" class="def">liftUStore</a> :: (<a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template, RequireAllUniqueFields template) =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> (<a href="../morley-1.1.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> template ': s) <a href="src/Lorentz.UStore.Lift.html#liftUStore" class="link">Source</a> <a href="#v:liftUStore" class="selflink">#</a></p><div class="doc"><p>Lift an <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> to another <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> which contains all the entries
 of the former under given field.</p><p>This function is not intended for use in migrations, only in normal
 entry points.</p><p>Note that this function ensures that template of resulting store
 does not contain inner nested templates with duplicated fields,
 otherwise <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> invariants could get broken.</p></div></div><div class="top"><p class="src"><a id="v:unliftUStore" class="def">unliftUStore</a> :: <a href="Lorentz-Prelude.html#t:Generic" title="Lorentz.Prelude">Generic</a> template =&gt; <a href="Lorentz-Value.html#t:Label" title="Lorentz.Value">Label</a> name -&gt; (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> template ': s) <a href="Lorentz-Base.html#t::-45--62-" title="Lorentz.Base">:-&gt;</a> (<a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a> (<a href="../morley-1.1.0/Michelson-Typed-Haskell-Instr-Product.html#t:GetFieldType" title="Michelson.Typed.Haskell.Instr.Product">GetFieldType</a> template name) ': s) <a href="src/Lorentz.UStore.Lift.html#unliftUStore" class="link">Source</a> <a href="#v:unliftUStore" class="selflink">#</a></p><div class="doc"><p>Unlift an <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> to a smaller <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> which is part of the former.</p><p>This function is not intended for use in migrations, only in normal
 entry points.</p><p>Surprisingly, despite smaller <code><a href="Lorentz-UStore-Types.html#t:UStore" title="Lorentz.UStore.Types">UStore</a></code> may have extra entries,
 this function is safe when used in contract code.
 Truly, all getters and setters are still safe to use.
 Also, there is no way for the resulting small <code>UStore</code> to leak outside
 of the contract since the only place where <code>big_map</code> can appear
 is contract storage, so this small <code>UStore</code> can be either dropped
 or lifted back via <code><a href="Lorentz-UStore-Lift.html#v:liftUStore" title="Lorentz.UStore.Lift">liftUStore</a></code> to appear as part of the new contract's state.</p><p>When this function is run as part of standalone instructions sequence,
 not as part of contract code (e.g. in tests), you may get an <code>UStore</code>
 with entries not inherent to it.</p></div></div><a href="#g:1" id="g:1"><h1>Internals</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:UStoreFieldsAreUnique" class="def">UStoreFieldsAreUnique</a> template = <a href="../morley-1.1.0/Util-Type.html#t:AllUnique" title="Util.Type">AllUnique</a> (UStoreFields template) <a href="src/Lorentz.UStore.Lift.html#UStoreFieldsAreUnique" class="link">Source</a> <a href="#t:UStoreFieldsAreUnique" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>